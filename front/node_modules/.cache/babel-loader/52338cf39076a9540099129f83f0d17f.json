{"ast":null,"code":"var makeStrToArr=function makeStrToArr(str){var char;var nextChar;var numStr='';var arr=[];for(var i=0;i<str.length;i++){char=str.charAt(i);nextChar=str.charAt(i+1);if(char==='+'||char==='-'||char==='/'||char==='*'){if(numStr===''||nextChar+1==='-'){// add minus if first or minus number\nnumStr+=char;}else{arr.push(numStr);arr.push(char);numStr='';}}else{numStr+=char;if(i===str.length-1){arr.push(numStr);}}}return arr;};var calc=function calc(numStr){var reg=/^([-]{0,1}\\d*[.]{0,1}\\d+)([/*+-]([-]{0,1}\\d*[.]{0,1}\\d+))*$/gm;// https://regex101.com/r/FNHIib/5\nif(!reg.exec(numStr))return console.error(numStr+' -  is not calculated string');var numArr=makeStrToArr(numStr);var nextIndex;var oneBefore;var tempNum=false;var newNumArr=[];var arrLen=numArr.length;console.log(arrLen);console.log(numArr);numArr.forEach(function(ele,i){nextIndex=i+1;// console.log(ele);\nif(i===0){tempNum=parseFloat(ele);}if(ele==='*'){tempNum=tempNum*numArr[nextIndex];oneBefore=true;}if(ele==='/'){tempNum=tempNum/numArr[nextIndex];oneBefore=true;}if(ele==='+'||ele==='-'){newNumArr.push(tempNum);newNumArr.push(ele);tempNum=parseFloat(numArr[nextIndex]);oneBefore=false;console.log(newNumArr);}console.log(nextIndex);if(arrLen===nextIndex){if(oneBefore){newNumArr.push(tempNum);tempNum=false;// clean var for next loop\n}else{newNumArr.push(parseFloat(ele));tempNum=false;// clean var for next loop\n}console.log(newNumArr);}});console.log(newNumArr);newNumArr.forEach(function(ele,i){nextIndex=i+1;if(nextIndex===1){tempNum=ele;}else{if(ele==='+'){tempNum=tempNum+newNumArr[nextIndex];}if(ele==='-'){tempNum=tempNum-newNumArr[nextIndex];}}});tempNum=tempNum.toFixed(12);tempNum=parseFloat(tempNum);tempNum=tempNum.toString();return tempNum;};export default calc;","map":{"version":3,"sources":["/home/amir/שולחן העבודה/project/maafe-malle/front/src/function/calc.js"],"names":["makeStrToArr","str","char","nextChar","numStr","arr","i","length","charAt","push","calc","reg","exec","console","error","numArr","nextIndex","oneBefore","tempNum","newNumArr","arrLen","log","forEach","ele","parseFloat","toFixed","toString"],"mappings":"AACA,GAAIA,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,GAAD,CAAS,CAE3B,GAAIC,CAAAA,IAAJ,CACA,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAMC,CAAAA,GAAG,CAAG,EAAZ,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,GAAG,CAACM,MAAxB,CAAgCD,CAAC,EAAjC,CAAqC,CACpCJ,IAAI,CAAGD,GAAG,CAACO,MAAJ,CAAWF,CAAX,CAAP,CACAH,QAAQ,CAAGF,GAAG,CAACO,MAAJ,CAAWF,CAAC,CAAC,CAAb,CAAX,CAEA,GAAGJ,IAAI,GAAK,GAAT,EAAgBA,IAAI,GAAK,GAAzB,EAAgCA,IAAI,GAAK,GAAzC,EAAgDA,IAAI,GAAK,GAA5D,CAAgE,CAC/D,GAAGE,MAAM,GAAK,EAAX,EAAiBD,QAAQ,CAAG,CAAX,GAAiB,GAArC,CAAyC,CAAE;AAC1CC,MAAM,EAAIF,IAAV,CACA,CAFD,IAEK,CACJG,GAAG,CAACI,IAAJ,CAASL,MAAT,EACAC,GAAG,CAACI,IAAJ,CAASP,IAAT,EACAE,MAAM,CAAG,EAAT,CACA,CACD,CARD,IAQK,CACJA,MAAM,EAAIF,IAAV,CACA,GAAGI,CAAC,GAAKL,GAAG,CAACM,MAAJ,CAAY,CAArB,CAAuB,CACtBF,GAAG,CAACI,IAAJ,CAASL,MAAT,EACA,CACD,CACD,CACD,MAAOC,CAAAA,GAAP,CACA,CA1BD,CA4BA,GAAIK,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAEN,MAAF,CAAc,CACxB,GAAMO,CAAAA,GAAG,CAAG,+DAAZ,CAA4E;AAC5E,GAAI,CAACA,GAAG,CAACC,IAAJ,CAASR,MAAT,CAAL,CACC,MAAOS,CAAAA,OAAO,CAACC,KAAR,CAAcV,MAAM,CAAG,8BAAvB,CAAP,CAED,GAAIW,CAAAA,MAAM,CAAGf,YAAY,CAACI,MAAD,CAAzB,CACA,GAAIY,CAAAA,SAAJ,CACA,GAAIC,CAAAA,SAAJ,CACA,GAAIC,CAAAA,OAAO,CAAG,KAAd,CACA,GAAMC,CAAAA,SAAS,CAAG,EAAlB,CACA,GAAMC,CAAAA,MAAM,CAAGL,MAAM,CAACR,MAAtB,CACAM,OAAO,CAACQ,GAAR,CAAYD,MAAZ,EAGAP,OAAO,CAACQ,GAAR,CAAYN,MAAZ,EAEAA,MAAM,CAACO,OAAP,CAAe,SAACC,GAAD,CAAMjB,CAAN,CAAY,CAC1BU,SAAS,CAAGV,CAAC,CAAG,CAAhB,CACA;AACA,GAAIA,CAAC,GAAK,CAAV,CAAa,CACXY,OAAO,CAAGM,UAAU,CAACD,GAAD,CAApB,CACD,CAED,GAAIA,GAAG,GAAK,GAAZ,CAAiB,CAChBL,OAAO,CAAGA,OAAO,CAAGH,MAAM,CAACC,SAAD,CAA1B,CACAC,SAAS,CAAG,IAAZ,CACA,CACD,GAAIM,GAAG,GAAK,GAAZ,CAAiB,CAChBL,OAAO,CAAGA,OAAO,CAAGH,MAAM,CAACC,SAAD,CAA1B,CACAC,SAAS,CAAG,IAAZ,CACA,CACD,GAAIM,GAAG,GAAK,GAAR,EAAeA,GAAG,GAAK,GAA3B,CAAgC,CAC/BJ,SAAS,CAACV,IAAV,CAAeS,OAAf,EACAC,SAAS,CAACV,IAAV,CAAec,GAAf,EACAL,OAAO,CAAGM,UAAU,CAACT,MAAM,CAACC,SAAD,CAAP,CAApB,CACAC,SAAS,CAAG,KAAZ,CAEAJ,OAAO,CAACQ,GAAR,CAAYF,SAAZ,EACA,CACDN,OAAO,CAACQ,GAAR,CAAYL,SAAZ,EAEA,GAAII,MAAM,GAAKJ,SAAf,CAA0B,CACzB,GAAIC,SAAJ,CAAe,CACdE,SAAS,CAACV,IAAV,CAAeS,OAAf,EACAA,OAAO,CAAG,KAAV,CAAiB;AACjB,CAHD,IAGO,CACNC,SAAS,CAACV,IAAV,CAAee,UAAU,CAACD,GAAD,CAAzB,EACAL,OAAO,CAAG,KAAV,CAAiB;AACjB,CACDL,OAAO,CAACQ,GAAR,CAAYF,SAAZ,EACA,CACD,CAnCD,EAoCAN,OAAO,CAACQ,GAAR,CAAYF,SAAZ,EACAA,SAAS,CAACG,OAAV,CAAkB,SAACC,GAAD,CAAMjB,CAAN,CAAY,CAC7BU,SAAS,CAAGV,CAAC,CAAG,CAAhB,CAEA,GAAIU,SAAS,GAAK,CAAlB,CAAqB,CACpBE,OAAO,CAAGK,GAAV,CACA,CAFD,IAEO,CACN,GAAIA,GAAG,GAAK,GAAZ,CAAiB,CAChBL,OAAO,CAAGA,OAAO,CAAGC,SAAS,CAACH,SAAD,CAA7B,CACA,CACD,GAAIO,GAAG,GAAK,GAAZ,CAAiB,CAChBL,OAAO,CAAGA,OAAO,CAAGC,SAAS,CAACH,SAAD,CAA7B,CACA,CACD,CACD,CAbD,EAcAE,OAAO,CAAGA,OAAO,CAACO,OAAR,CAAgB,EAAhB,CAAV,CACAP,OAAO,CAAGM,UAAU,CAACN,OAAD,CAApB,CACAA,OAAO,CAAGA,OAAO,CAACQ,QAAR,EAAV,CACA,MAAOR,CAAAA,OAAP,CACA,CAvED,CAyEA,cAAeR,CAAAA,IAAf","sourcesContent":["\r\nlet makeStrToArr = (str) => {\r\n\t\r\n\tlet char;\r\n\tlet nextChar;\r\n\tlet numStr = '';\r\n\tconst arr = []\r\n\tfor (let i = 0; i < str.length; i++) {\t\t\t\r\n\t\tchar = str.charAt(i);\r\n\t\tnextChar = str.charAt(i+1)\r\n\t\t\r\n\t\tif(char === '+' || char === '-' || char === '/' || char === '*'){\r\n\t\t\tif(numStr === '' || nextChar + 1 === '-'){ // add minus if first or minus number\r\n\t\t\t\tnumStr += char;\r\n\t\t\t}else{\r\n\t\t\t\tarr.push(numStr)\r\n\t\t\t\tarr.push(char)\r\n\t\t\t\tnumStr = ''\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tnumStr += char;\r\n\t\t\tif(i === str.length -1){\t\t\r\n\t\t\t\tarr.push(numStr)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nlet calc = ( numStr ) => {\r\n\tconst reg = /^([-]{0,1}\\d*[.]{0,1}\\d+)([/*+-]([-]{0,1}\\d*[.]{0,1}\\d+))*$/gm;// https://regex101.com/r/FNHIib/5\r\n\tif (!reg.exec(numStr))\r\n\t\treturn console.error(numStr + ' -  is not calculated string');\r\n\t\r\n\tlet numArr = makeStrToArr(numStr)\r\n\tlet nextIndex;\r\n\tlet oneBefore;\r\n\tlet tempNum = false;\r\n\tconst newNumArr = [];\r\n\tconst arrLen = numArr.length;\r\n\tconsole.log(arrLen);\r\n\t\r\n\t\r\n\tconsole.log(numArr);\r\n\r\n\tnumArr.forEach((ele, i) => {\r\n\t\tnextIndex = i + 1;\r\n\t\t// console.log(ele);\r\n\t\tif (i === 0) {\t\r\n\t\t\t\ttempNum = parseFloat(ele);\t\r\n\t\t}\r\n\r\n\t\tif (ele === '*') {\r\n\t\t\ttempNum = tempNum * numArr[nextIndex];\r\n\t\t\toneBefore = true;\r\n\t\t}\r\n\t\tif (ele === '/') {\r\n\t\t\ttempNum = tempNum / numArr[nextIndex];\r\n\t\t\toneBefore = true;\r\n\t\t}\r\n\t\tif (ele === '+' || ele === '-') {\r\n\t\t\tnewNumArr.push(tempNum);\r\n\t\t\tnewNumArr.push(ele);\r\n\t\t\ttempNum = parseFloat(numArr[nextIndex]);\r\n\t\t\toneBefore = false;\r\n\t\t\t\r\n\t\t\tconsole.log(newNumArr);\r\n\t\t}\r\n\t\tconsole.log(nextIndex);\r\n\t\t\r\n\t\tif (arrLen === nextIndex) {\r\n\t\t\tif (oneBefore) {\r\n\t\t\t\tnewNumArr.push(tempNum);\r\n\t\t\t\ttempNum = false; // clean var for next loop\r\n\t\t\t} else {\r\n\t\t\t\tnewNumArr.push(parseFloat(ele));\r\n\t\t\t\ttempNum = false; // clean var for next loop\r\n\t\t\t}\r\n\t\t\tconsole.log(newNumArr);\r\n\t\t}\r\n\t});\r\n\tconsole.log(newNumArr);\r\n\tnewNumArr.forEach((ele, i) => {\r\n\t\tnextIndex = i + 1;\r\n\t\t\r\n\t\tif (nextIndex === 1) {\r\n\t\t\ttempNum = ele;\r\n\t\t} else {\r\n\t\t\tif (ele === '+') {\r\n\t\t\t\ttempNum = tempNum + newNumArr[nextIndex];\r\n\t\t\t}\r\n\t\t\tif (ele === '-') {\r\n\t\t\t\ttempNum = tempNum - newNumArr[nextIndex];\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\ttempNum = tempNum.toFixed(12)\r\n\ttempNum = parseFloat(tempNum)\r\n\ttempNum = tempNum.toString()\r\n\treturn tempNum\r\n};\r\n\r\nexport default calc;\r\n"]},"metadata":{},"sourceType":"module"}